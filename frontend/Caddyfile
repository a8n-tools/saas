{$PORT:8080}

root * /usr/share/caddy

# Health check endpoint
handle /health {
	respond "healthy" 200
}

# Deny access to hidden files
@hidden path /.*
handle @hidden {
	respond 403
}

# Long-lived cache headers for hashed assets
@assets path /assets/*
header @assets Cache-Control "public, max-age=31536000, immutable"

# Security headers
header X-Frame-Options "SAMEORIGIN"
header X-Content-Type-Options "nosniff"

# SPA fallback - serve index.html for all routes
try_files {path} /index.html
file_server
